---
name: 按钮权限指令实现计划
overview: 新增按钮级权限指令 v-permission，并在应用入口注册，用于无权限时隐藏按钮。
todos:
  - id: add-permission-directive
    content: 新增 v-permission 指令并按 store 校验权限
    status: completed
  - id: register-directive
    content: 在 main.ts 注册 v-permission 指令
    status: completed
---

# 按钮权限指令实现计划

## 目标

- 提供 `v-permission` 指令用于按钮权限控制（无权限隐藏）。

## 变更点

- 新增指令实现文件：[`d:/frontEnd/wcode/studyroom-admin-web/src/directives/permission.ts`](d:/frontEnd/wcode/studyroom-admin-web/src/directives/permission.ts)
- 注册指令到应用入口：[`d:/frontEnd/wcode/studyroom-admin-web/src/main.ts`](d:/frontEnd/wcode/studyroom-admin-web/src/main.ts)

## 实施步骤

1. 在 `src/directives/permission.ts` 中实现 `v-permission`：

- 指令值接收字符串或字符串数组。
- 通过 `usePermissionStore().hasPermission()` 判断是否有权限。
- 无权限时移除元素或设置 `display: none`。

2. 在 `main.ts` 注册全局指令：`app.directive('permission', permissionDirective)`。
3.（可选）补充使用示例注释或 README 中的简单说明（仅在需要时）。